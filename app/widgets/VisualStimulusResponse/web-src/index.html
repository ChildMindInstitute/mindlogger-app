<!DOCTYPE html>
<html>

<head>
    <title>Flanker Task</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <script src="./jspsych.js"></script>
    <script src="./plugins/jspsych-html-button-response-modified.js"></script>
    <script src="./plugins/jspsych-html-keyboard-response.js"></script>
    <script src="./experiment.js"></script>
    <link rel="stylesheet" href="./css/jspsych.css">
    <link rel="stylesheet" href="./css/overrides.css">
</head>

<body>
</body>
<script>
// preload button images for flanker
function preloadButtonImages (choices) {
  for (const choice of choices) {
    if (choice.image) {
      const image = new Image();
      image.src = choice.image;
    }
  }
}

/*start experiment*/
function start() {
    jsPsych.init({
        timeline: buildTimeline(),
        on_finish: function (data) {
            if (window.ReactNativeWebView) {
                const serialized = JSON.stringify({ type: 'finish', data: data.values() });
                window.ReactNativeWebView.postMessage(serialized);
            }
        }
    });
}

// window.CONFIG = {
//     "trials": [{
//         "stimulus": {
//             "en": "<img src='https://raw.githubusercontent.com/stufreen/schema-standardization/master/activities/FlankerExample/items/congruent-left.png' />"
//         },
//         "choices": [{
//             "name": {
//                 "en": "<img alt='left' src='https://raw.githubusercontent.com/stufreen/schema-standardization/master/activities/FlankerExample/items/arrow-left-white.png' />"
//             },
//             "value": 0
//         }, {
//             "name": {
//                 "en": "<img alt='right' src='https://raw.githubusercontent.com/stufreen/schema-standardization/master/activities/FlankerExample/items/arrow-right-white.png' />"
//             },
//             "value": 1
//         }],
//         "correctChoice": 0,
//         "weight": 1
//     }, {
//         "stimulus": {
//             "en": "<img src='https://raw.githubusercontent.com/stufreen/schema-standardization/master/activities/FlankerExample/items/incongruent-left.png' />"
//         },
//         "choices": [{
//             "name": {
//                 "en": "<img alt='left' src='https://raw.githubusercontent.com/stufreen/schema-standardization/master/activities/FlankerExample/items/arrow-left-white.png' />"
//             },
//             "value": 0
//         }, {
//             "name": {
//                 "en": "<img alt='right' src='https://raw.githubusercontent.com/stufreen/schema-standardization/master/activities/FlankerExample/items/arrow-right-white.png' />"
//             },
//             "value": 1
//         }],
//         "correctChoice": 0,
//         "weight": 1
//     }, {
//         "stimulus": {
//             "en": "<img src='https://raw.githubusercontent.com/stufreen/schema-standardization/master/activities/FlankerExample/items/congruent-right.png' />"
//         },
//         "choices": [{
//             "name": {
//                 "en": "<img alt='left' src='https://raw.githubusercontent.com/stufreen/schema-standardization/master/activities/FlankerExample/items/arrow-left-white.png' />"
//             },
//             "value": 0
//         }, {
//             "name": {
//                 "en": "<img alt='right' src='https://raw.githubusercontent.com/stufreen/schema-standardization/master/activities/FlankerExample/items/arrow-right-white.png' />"
//             },
//             "value": 1
//         }],
//         "correctChoice": 1,
//         "weight": 1
//     }, {
//         "stimulus": {
//             "en": "<img src='https://raw.githubusercontent.com/stufreen/schema-standardization/master/activities/FlankerExample/items/incongruent-right.png' />"
//         },
//         "choices": [{
//             "name": {
//                 "en": "<img alt='left' src='https://raw.githubusercontent.com/stufreen/schema-standardization/master/activities/FlankerExample/items/arrow-left-white.png' />"
//             },
//             "value": 0
//         }, {
//             "name": {
//                 "en": "<img alt='right' src='https://raw.githubusercontent.com/stufreen/schema-standardization/master/activities/FlankerExample/items/arrow-right-white.png' />"
//             },
//             "value": 1
//         }],
//         "correctChoice": 1,
//         "weight": 1
//     }],
//     "showFixation": true,
//     "showFeedback": true,
//     "showResults": true,
//     "trialDuration": 5000,
//     "samplingMethod": "fixed-order",
//     "continueText": ["Press button below to continue"],
//     "restartText": ["Press button below to restart"],
// };
// start();
</script>

</html>
